= Networking issues for distributed systems

== 分布式系统网络互联的几个议题

=== 性能

延迟：执行操作之后和到达计算机之前的这段时间。

数据传输率：一旦传输过程开始，数据在网络上两台计算机之间的传输速度，bit/s

----
传输时间= 延迟 + 传输距离/数据传输率
----

举例：一个客户将200字节的请求消息发送到一个服务，服务产生了5000字节的应答。
1> 使用TCP
2> 使用UDP
3> 客户和服务器在一个主机上

- 发送/接收时，每个数据包延迟（本地或远程）:5ms
- 建立连接的时间(仅针对TCP):5ms
- 数据传输速率：10Mbps
- MTU:1000字节
- 服务器处理请求的时间：2ms
- 网络处于轻负载状态

请求时间（服务器收到）: 

5ms(发送延迟)+0ms(传输延迟）+ 5ms(接收延迟)
= 10ms

相应时间 （客户端收到）

MTU分片5条消息，每条的消息的延迟为
2ms(服务器处理时间)+ 5ms(发送延迟)+0ms(传输延迟）+ 5ms(接收延迟)
= 12

12ms*5 = 60ms

总计 10+60 = 70ms

=== 路由器与交换机
路由器：RIP，距离向量算法，链路-状态算法
互联网下的解决方案：固定拓扑区域对应固定的路由网关地址；默认路由，在表格大小与效率折中；

交换机：分离了到达的流量；ARP，IP与MAC（以太网地址）的映射表