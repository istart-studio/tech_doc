= MobileIP

== 移动IP

1. 当移动主机在"主站点"中连接到互联网时，数据包会以正常的方式路由到主机上；

- 当移动主机在其他地方连入互联网时，有两个代理进程负责重新路由，主代理（HA）和副代理（FA）。这些进程运行在主站点以及移动主机当前所在位置处的固定计算机上。

3. HA负责保存移动主机当前位置（即可到达移动主机的IP地址）的最新情况。
* 当一个移动主机离开主站点时，它会告知HA，HA会注意到该移动主机离开。
* 当主机离开时，HA就充当一个代理服务器。HA会通知本地路由器取消与移动主机IP地址有关的任何缓存。
* 当HA作为一个代理服务器时，HA会响应有关移动主机IP地址的ARP请求，将自己的局域网地址作为移动主机的网络地址发给该请求。

4. 当移动主机到达一个新站点的时候，他会通知在此站点上的FA。FA给它分配一个"转交"地址——一个本地子网上的新的临时IP地址。

5. 此时FA与HA联系，将移动主机的主IP地址以及分配给它的转交地址告知HA。

6. HA将转交地址发送给原来的发送者.发送者如果支持移动IP会用这个新地址与移动主机通信.